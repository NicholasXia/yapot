
<!DOCTYPE html>
<!-- 
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.0
Version: 1.5.3
Author: KeenThemes
Website: http://www.keenthemes.com/
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
	<meta charset="utf-8" />
	<title>欢迎进入首次设置</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	<meta name="MobileOptimized" content="320">
	<!-- BEGIN GLOBAL MANDATORY STYLES -->        
	<link href="/assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
	<link href="/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
	<link href="/assets/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
	<!-- END GLOBAL MANDATORY STYLES -->
	<!-- BEGIN THEME STYLES --> 
	<link href="/assets/css/style-metronic.css" rel="stylesheet" type="text/css"/>
	<link href="/assets/css/style.css" rel="stylesheet" type="text/css"/>
	<link href="/assets/css/style-responsive.css" rel="stylesheet" type="text/css"/>
	<link href="/assets/css/plugins.css" rel="stylesheet" type="text/css"/>
	<link href="/assets/css/themes/default.css" rel="stylesheet" type="text/css" id="style_color"/>
	<link href="/assets/css/custom.css" rel="stylesheet" type="text/css"/>
	<link rel="stylesheet" type="text/css" href="/assets/plugins/bootstrap-fileupload/bootstrap-fileupload.css" />
	<link rel="stylesheet" type="text/css" href="/assets/plugins/bootstrap-markdown/css/bootstrap-markdown.min.css">
	<link rel="stylesheet" type="text/css" href="/assets/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.css" />
	<script type="text/javascript" src="/assets/plugins/ueditor/ueditor.config.js"></script>
	<script type="text/javascript" src="/assets/plugins/ueditor/ueditor.all.min.js"></script>
	<!-- END THEME STYLES -->
	<link rel="shortcut icon" href="favicon.ico" />
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="page-header-fixed page-full-width">
	<!-- BEGIN HEADER -->   
	<div class="header navbar navbar-inverse navbar-fixed-top">
		<% include ../include/top %>
	</div>
	<!-- END HEADER -->
	<div class="clearfix"></div>
	<!-- BEGIN CONTAINER -->   
	<div class="page-container">
		<div class="page-content">
			<div class="row">
				<div class="col-md-12">
					<div class="portlet box blue" id="form_wizard_1">
						<div class="portlet-title">
							<div class="caption">
								<i class="fa fa-reorder"></i> 欢迎首次进入系统- <span class="step-title">完成四个步骤轻松创建网站</span>
							</div>
							<div class="tools hidden-xs">
								<a href="javascript:;" class="collapse"></a>
								<a href="#portlet-config" data-toggle="modal" class="config"></a>
								<a href="javascript:;" class="reload"></a>
								<a href="javascript:;" class="remove"></a>
							</div>
						</div>
						<div class="portlet-body form">
							<form action="#" class="form-horizontal" id="submit_form" novalidate="novalidate">
								<div class="form-wizard">
									<div class="form-body">
										<ul class="nav nav-pills nav-justified steps">
											<li class="active">
												<a href="#tab1" data-toggle="tab" class="step">
												<span class="number">1</span>
												<span class="desc"><i class="fa fa-check"></i> 网站设置</span>   
												</a>
											</li>
											<li>
												<a href="#tab2" data-toggle="tab" class="step">
												<span class="number">2</span>
												<span class="desc"><i class="fa fa-check"></i> 频道设置</span>   
												</a>
											</li>
											<li>
												<a href="#tab3" data-toggle="tab" class="step active">
												<span class="number">3</span>
												<span class="desc"><i class="fa fa-check"></i> 添加文章</span>   
												</a>
											</li>
											<li>
												<a href="#tab4" data-toggle="tab" class="step active">
												<span class="number">4</span>
												<span class="desc"><i class="fa fa-check"></i> 选择网站模板</span>   
												</a>
											</li>
											<li>
												<a href="#tab5" data-toggle="tab" class="step">
												<span class="number">5</span>
												<span class="desc"><i class="fa fa-check"></i> 生成网站</span>   
												</a> 
											</li>
										</ul>
										<div id="bar" class="progress progress-striped" role="progressbar">
											<div id="idWizardProgress" class="progress-bar progress-bar-success" style="width: 25%;"></div>
										</div>
										<div class="tab-content">
											<div class="alert alert-danger display-none">
												<button class="close" data-dismiss="alert"></button>
												提交错误
											</div>
											<div class="alert alert-success display-none">
												<button class="close" data-dismiss="alert"></button>
												提交成功
											</div>
											<div class="tab-pane active" id="tab1">
												<h3 class="block">请您填写网站相关信息</h3>
												<div class="form-group">
													<label class="control-label col-md-3">网站名称<span class="required">*</span></label>
													<div class="col-md-4">
														<input type="text" class="form-control" name="website_name">
														
													</div>
												</div>
												<div class="form-group">
													<label class="control-label col-md-3">英文名<span class="required">*</span></label>
													<div class="col-md-4">
														<input type="text" class="form-control" name="website_english_name" id="submit_form_password">
														
													</div>
												</div>
												<div class="form-group">
													<label class="col-md-3 control-label">封面<span class="required">*</span></label><div class="controls col-md-4">
														<div class="thumbnail">
															<input id="idWebsiteImageHidden" type="hidden" name="website_image" value="" />
															<img id="idWebsiteImage" src="data:image/png;base64,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" alt="100%x200" >
															<div class="caption">
																<p>
																<div class="fileupload fileupload-new" data-provides="fileupload">
																	<span class="btn default btn-file">
																	<span class="fileupload-new"><i class="fa fa-paper-clip"></i> 上传图片</span>
																	<span class="fileupload-exists"><i class="fa fa-undo"></i> Change</span>
																	<input id="websitefileupload" type="file" class="default" name="file" data-url="/upload?id=<%=user.id%>"/>
																	</span>
																	<span class="fileupload-preview" style="margin-left:5px;"></span>
																	<a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none; margin-left:5px;"></a>
																</div></p>
															</div>
															<div class="progress progress-striped">
																<div id="idProgressBar1" class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
																	
																</div>
															</div>
														</div>
													</div>
												</div>
												
											</div>
											<div class="tab-pane" id="tab2">
												<h3 class="block">请填写网站的一个频道</h3>
												<div class="form-group">
													<label class="control-label col-md-3">频道名称<span class="required">*</span></label>
													<div class="col-md-4">
														<input type="text" class="form-control" name="channel_name">
														<span class="help-block">如，最新咨询、专业文献等</span>
													</div>
												</div>
												<div class="form-group">
													<label class="control-label col-md-3">频道英文名<span class="required">*</span></label>
													<div class="col-md-4">
														<input type="text" class="form-control" name="channel_english_name">
														
													</div>
												</div>
											</div>
											<div class="tab-pane" id="tab3">
												<h3 class="block">请为频道添加一篇文章</h3>
												<div class="form-group">
													<label class="control-label col-md-3">标题<span class="required">*</span></label>
													<div class="col-md-4">
														<input type="text" class="form-control" name="article_name">
														<span class="help-block"></span>
													</div>
												</div>
												<div class="form-group">
													<label class="col-md-3 control-label">图片</label><div class="controls col-md-4">
														<div class="thumbnail">
															<input id="idImageInput" type="hidden" name="article_image" value="" />
															<img id="idImage" src="data:image/png;base64,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" alt="100%x200" >
															<div class="caption">
																<p>
																<div class="fileupload fileupload-new" data-provides="fileupload">
																	<span class="btn default btn-file">
																	<span class="fileupload-new"><i class="fa fa-paper-clip"></i> 上传图片</span>
																	<span class="fileupload-exists"><i class="fa fa-undo"></i> Change</span>
																	<input id="fileupload" type="file" class="default" name="file" data-url="/upload?id=<%=user.id%>"/>
																	</span>
																	<span class="fileupload-preview" style="margin-left:5px;"></span>
																	<a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none; margin-left:5px;"></a>
																</div></p>
															</div>
															<div id="idProgressBar" class="progress progress-striped">
																<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
																	
																</div>
															</div>
														</div>
													</div>
												</div>
											
												<div class="form-group">
													<label class="col-md-3 control-label">正文</label>
													<div class="col-md-9">
													<!-- 	<textarea data-provide="markdown" rows="10" id="idContent" name="article_content" class="form-control"   ></textarea> -->
														<script id="idContent"  name="article_content" type="text/plain" style="height:500px;"></script>
													</div>
												</div>
											</div>
											<div class="tab-pane" id="tab4">
												<div class="row">
								
								
												</div>
											</div>
											<div class="tab-pane" id="tab5">
												<h3 class="block">将会生成的网站</h3>
												<h4 class="form-section">网站</h4>
												<div class="form-group">
													<label class="control-label col-md-3">名称：</label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="website_name"></p>
													</div>
												</div>
												<div class="form-group">
													<label class="control-label col-md-3">英文名：</label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="website_english_name"></p>
													</div>
												</div>
												<h4 class="form-section">频道</h4>
												<div class="form-group">
													<label class="control-label col-md-3">名称：</label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="channel_name"></p>
													</div>
												</div>
												<div class="form-group">
													<label class="control-label col-md-3">英文名：</label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="channel_english_name"></p>
													</div>
												</div>

												<h4 class="form-section">文章</h4>
												<div class="form-group">
													<label class="control-label col-md-3">标题：</label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="article_name"></p>
													</div>
												</div>
												<div class="form-group">
													<label class="control-label col-md-3">图片：</label>
													<div class="col-md-4">
													<div class="thumbnail">
														<img id="idFinalImg" class="form-control-static" src="data:image/png;base64,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"  >
										
									</div>
													</div>
												</div>
												<div class="form-group">
													<label class="control-label col-md-3">正文：</label>
													<div class="col-md-4">
														<p class="form-control-static" data-display="article_content"></p>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="form-actions fluid">
										<div class="row">
											<div class="col-md-12">
												<div class="col-md-offset-3 col-md-9">
													<a href="javascript:;" class="btn default button-previous disabled" style="display: none;">
													<i class="m-icon-swapleft"></i> 返回上一步
													</a>
													<a href="javascript:;" class="btn blue button-next">
													下一步 <i class="m-icon-swapright m-icon-white"></i>
													</a>
													<a href="javascript:;" class="btn green button-submit" style="display: none;">
													提交 <i class="m-icon-swapright m-icon-white"></i>
													</a>                            
												</div>
											</div>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<template id= "idSkinTpl">
		<input name="tplname" type="hidden" value=""/>
		{{#tpls}}
		<div class="col-sm-12 col-md-4">
			<div class="thumbnail">
				<img src="{{imageurl}}" style="width: 100%; height: 200px; display: block;" >
				<h3>{{name}}</h3>
				<div class="caption">
					<p>{{readme}}</p>
				</div>
			</div>					
		</div>
		{{/tpls}}
	</template>
	<!-- END CONTAINER -->
	<!-- BEGIN FOOTER -->
	<%include ../include/footer.ejs %>
	<!-- END FOOTER -->
	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
	<!-- BEGIN CORE PLUGINS -->   
	<%include ../include/ie.ejs %>
	<%include ../include/core_plugin.ejs %>
	<!-- END CORE PLUGINS -->
	<script type="text/javascript" src="/assets/plugins/jquery-validation/dist/jquery.validate.min.js"></script>
	<script type="text/javascript" src="/assets/plugins/jquery-validation/dist/additional-methods.min.js"></script>
	<script type="text/javascript" src="/assets/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js"></script>

	<script type="text/javascript" src="/assets/plugins/bootstrap-wysihtml5/wysihtml5-0.3.0.js"></script> 
	<script type="text/javascript" src="/assets/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.js"></script>
	<script type="text/javascript" src="/assets/plugins/jquery-file-upload/js/vendor/jquery.ui.widget.js"></script>
	<script type="text/javascript" src="/assets/plugins/jquery-file-upload/js/jquery.iframe-transport.js"></script>
	<script type="text/javascript" src="/assets/plugins/jquery-file-upload/js/jquery.fileupload.js"></script>
	<script src="/assets/scripts/app.js"></script>      
	<script>
		jQuery(document).ready(function() {    
		   App.init();
		   // $('#idContent').wysihtml5();
		   var editor = new UE.ui.Editor();
            editor.render("idContent");
		   	//网站封面上传
            $('#websitefileupload').fileupload({
                dataType: 'json',
                done: function (e, data) {
                    $.each(data.result.files, function (index, file) {//
                        $("#idWebsiteImage").attr("src",file.url);
                        $("#idWebsiteImageHidden").val(file.url);
                    });
                },
                progressall: function (e, data) {
                    var progress = parseInt(data.loaded / data.total * 100, 10);
                    $('#idProgressBar1').css(
                        'width',
                        progress + '%'
                    );
                    $('#idProgressBar1').attr(
                        'aria-valuenow',
                        progress
                    );
                }
            });


		    //文章文件上传
            $('#fileupload').fileupload({
                dataType: 'json',
                done: function (e, data) {
                    $.each(data.result.files, function (index, file) {//
                        $("#idImage").attr("src",file.url);
                        $("#idImageInput").val(file.url);
                    });
                },
                progressall: function (e, data) {
                    var progress = parseInt(data.loaded / data.total * 100, 10);
                    $('#idProgressBar').css(
                        'width',
                        progress + '%'
                    );
                    $('#idProgressBar').attr(
                        'aria-valuenow',
                        progress
                    );
                }
            });

		   var handleTitle = function(tab, navigation, index) {
                var total = navigation.find('li').length;
                var current = index + 1;
                // set wizard title
                $('.step-title', $('#form_wizard_1')).text('Step ' + (index + 1) + ' of ' + total);
                // set done steps
                jQuery('li', $('#form_wizard_1')).removeClass("done");
                var li_list = navigation.find('li');
                for (var i = 0; i < index; i++) {
                    jQuery(li_list[i]).addClass("done");
                }

                if (current == 1) {
                    $('#form_wizard_1').find('.button-previous').hide();
                } else {
                    $('#form_wizard_1').find('.button-previous').show();
                }

                if (current >= total) {
                    $('#form_wizard_1').find('.button-next').hide();
                    $('#form_wizard_1').find('.button-submit').show();
                    displayConfirm();
                } else {
                    $('#form_wizard_1').find('.button-next').show();
                    $('#form_wizard_1').find('.button-submit').hide();
                }
                App.scrollTo($('.page-title'));
            }

            var displayConfirm = function() {
                $('#tab5 .form-control-static', form).each(function(){

                    var input = $('[name="'+$(this).attr("data-display")+'"]', form);
                    if (input.is(":text") || input.is("textarea")) {
                        $(this).html(input.val());
                    } else if (input.is("select")) {
                        $(this).html(input.find('option:selected').text());
                    } else if (input.is(":radio") && input.is(":checked")) {
                        $(this).html(input.attr("data-title"));
                    } else if ($(this).attr("data-display") == 'payment') {
                        var payment = [];
                        $('[name="payment[]"]').each(function(){
                            payment.push($(this).attr('data-title'));
                        });
                        $(this).html(payment.join("<br>"));
                    }
                });

                $("#idFinalImg").attr("src", $("#idImage").attr("src"));
            }

		   var form = $('#submit_form');
           var error = $('.alert-danger', form);
           var success = $('.alert-success', form);

           form.validate({
                doNotHideMessage: true, //this option enables to show the error/success messages on tab switch.
                errorElement: 'span', //default input error message container
                errorClass: 'help-block', // default input error message class
                focusInvalid: false, // do not focus the last invalid input
                rules: {
                    //website
                    website_name: {
                        required: true
                    },
                    website_english_name: {
                        required: true
                    },
                    //channel
                    channel_name: {
                        required: true
                    },
                    channel_english_name: {
                        required: true
                    },
                    //article
                    article_name: {
                        required: true
                    },
                    article_content: {
                        required: true
                    }
                 
                },

                messages: { // custom messages for radio buttons and checkboxes
                    'website_name': {
                        required: "请填写网站名称"
                    },
                    'website_english_name': {
                        required: "请填写网站的英文名称"
                    }
                },

                errorPlacement: function (error, element) { // render error placement for each input type
                    if (element.attr("name") == "gender") { // for uniform radio buttons, insert the after the given container
                        error.insertAfter("#form_gender_error");
                    } else if (element.attr("name") == "payment[]") { // for uniform radio buttons, insert the after the given container
                        error.insertAfter("#form_payment_error");
                    } else {
                        error.insertAfter(element); // for other inputs, just perform default behavior
                    }
                },

                invalidHandler: function (event, validator) { //display error alert on form submit   
                    success.hide();
                    error.show();
                    App.scrollTo(error, -200);
                },

                highlight: function (element) { // hightlight error inputs
                    $(element)
                        .closest('.form-group').removeClass('has-success').addClass('has-error'); // set error class to the control group
                },

                unhighlight: function (element) { // revert the change done by hightlight
                    $(element)
                        .closest('.form-group').removeClass('has-error'); // set error class to the control group
                },

                success: function (label) {
                   
                },

                submitHandler: function (form) {
                    success.show();
                    error.hide();
                    //add here some ajax code to submit your form or just call form.submit() if you want to submit the form without ajax
                    
                }

            });


		   $('#form_wizard_1').bootstrapWizard({
                'nextSelector': '.button-next',
                'previousSelector': '.button-previous',
                onTabClick: function (tab, navigation, index, clickedIndex) {
                    success.hide();
                    error.hide();
                    if (form.valid() == false) {
                        return false;
                    }
                    handleTitle(tab, navigation, clickedIndex);
                },
                onNext: function (tab, navigation, index) {
                    success.hide();
                    error.hide();

                    if (form.valid() == false) {
                        return false;
                    }

                    handleTitle(tab, navigation, index);
                },
                onPrevious: function (tab, navigation, index) {
                    success.hide();
                    error.hide();

                    handleTitle(tab, navigation, index);
                },
                onTabShow: function (tab, navigation, index) {
                    var total = navigation.find('li').length;
                    var current = index + 1;
                    var $percent = (current / total) * 100;
                    $('#form_wizard_1').find('#idWizardProgress').css({
                        width: $percent + '%'
                    });
                }
            });

            $('#form_wizard_1').find('.button-previous').hide();
            $('#form_wizard_1 .button-submit').click(function () {
                    $.getJSON('/cms/ajSaveInit',form.serialize(),function(data){
                    	window.location = location;
                    });
            }).hide();

            //TAB3选择模版
            $.getJSON('/cms/tpl/ajGetAll',function(data){
            	var output = Mustache.render($("#idSkinTpl").html(), data);
            	$("#tab4 > div").html(output);
            	$("#tab4 .thumbnail").eq(0).css("border-width","thick");
            	$("#tab4 .thumbnail").eq(0).css("border-color","#EB0975");
            	$("#tab4 input").val(data.tpls[0].name);
            	var $last ;
            	$("#tab4 .thumbnail").click(function(){
            		
            		if($last){	
            			$(this).css("border-color","#ddd");
            		}
            		$("#tab4 input").val($(this).find("h3").html());
            		$(this).css("border-width","thick");
            		$(this).css("border-color","#EB0975");
            		$last=$(this);
            	});

            });
		});
	</script>

</html>